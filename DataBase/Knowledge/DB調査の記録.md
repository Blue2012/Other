# トランザクションとは？

・互いに関連、依存する処理をまとめ、一体不可分の処理単位として扱うことを指す。  
・トランザクションには成功か失敗のどちらかしかない  

![image](https://user-images.githubusercontent.com/18514297/97460241-ed6fcc00-197f-11eb-80fc-b46ecc470b1b.png)


# DBの種類別トランザクション処理

・PostgreSQL  

![image](https://user-images.githubusercontent.com/18514297/97460882-83a3f200-1980-11eb-8445-9c6dd21e2e6c.png)


・PostgreSQLはマルチプロセスで処理が行われる  
・複数のトランザクションが同時に実行される  
・トランザクション同士が相互に影響すると以下のことがおきることが懸念される  

【問題】  

 1.ダーティリード  
 　→他のトランザクションデータが未コミット状態のデータを読み込んでしまうこと  
  
![image](https://user-images.githubusercontent.com/18514297/97600747-bc110200-1a4c-11eb-87b2-158c06f2ba3e.png)  

　要は不完全な状態のデータを読み込んでしまうことをダーティリードと呼ぶ  


 2.反復不能読み取り  
 　→ トランザクション内で同じレコードを2回読み込んだとき、読み込み間隔内に他のトランザクションが該当レコードの更新をコミットしたことで1回目と2回目の読み込み結果が変わってしまうこと。  
  
 3.ファントムリード  
 　→ 同一条件のレコード抽出を2回行った時に、読み込み間隔内に他のトランザクションがレコードの削除／挿入をコミットすることにより、1回目と2回目の結果のレコード数が変わってしまうこと。  

![image](https://user-images.githubusercontent.com/18514297/97603059-6558f780-1a4f-11eb-918e-6e704882b7e1.png)
